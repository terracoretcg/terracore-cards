<!DOCTYPE html>
<html>
<head>
  <title>Terra CORE Deck CSV Generator</title>
  <style>
    body { font-family: Arial; padding: 20px; background: #111; color: white; }
    textarea { width: 100%; height: 200px; }
    button { padding: 10px 20px; margin-top: 10px; }
  </style>
</head>
<body>

<h2>Terra CORE â†’ PlayingCards.io CSV Generator</h2>

<p>Paste card IDs below (one per line):</p>

<textarea id="ids"></textarea>
<br>
<button onclick="generateCSV()">Generate CSV</button>

<script>
function generateCSV() {
  const baseURL = "https://terracoretcg.github.io/terracore-cards/images/";
  const rawLines = document.getElementById("ids").value
    .split("\n")
    .map(l => l.trim())
    .filter(Boolean);

  let rows = ["image"];

  for (const line of rawLines) {
    // Accept formats:
    // VOLCANO_HIDEOUT
    // 2x VOLCANO_HIDEOUT
    // 2 VOLCANO_HIDEOUT
    const m = line.match(/^(\d+)\s*x?\s+(.+)$/i);
    let qty = 1;
    let id = line;

    if (m) {
      qty = Math.max(1, parseInt(m[1], 10));
      id = m[2].trim();
    }

    for (let i = 0; i < qty; i++) {
      rows.push(baseURL + id + ".JPG");
    }
  }

  const csv = rows.join("\n") + "\n";

  // Better filename (timestamped)
  const stamp = new Date().toISOString().slice(0,19).replace(/[:T]/g,"-");
  const filename = `terracore_deck_${stamp}.csv`;

  const blob = new Blob([csv], { type: "text/csv" });
  const link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = filename;
  link.click();
}
</script>

</body>
</html>
